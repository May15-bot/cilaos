<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Restaurants et saveurs de Cilaos, La Réunion">
    <title>Restaurants à Cilaos - Saveurs locales</title>
    
    <!-- Leaflet pour la carte -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="restauration.css">
    <script src="restauration.js"></script>
    <style>
        :root {
            --couleur-fond: #FFFDF6;
            --couleur-surface: #FAF6E9;
            --couleur-accent: #A0C878;
            --couleur-texte: #384924;
            --couleur-blanc: #FFFFFF;
            --couleur-route: #D21F3C;
            --couleur-hibiscus: #FF1744;
            --couleur-orange: #FF8A50;
            --hauteur-navbar: 70px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Space Grotesk", sans-serif;
            background: var(--couleur-fond);
            color: var(--couleur-texte);
            line-height: 1.6;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--hauteur-navbar);
            background: var(--couleur-blanc);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            z-index: 10000;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--couleur-accent);
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--couleur-texte);
            transition: color 0.3s;
        }

        .nav-menu a:hover {
            color: var(--couleur-accent);
        }

        /* Hero Section */
        .hero-restaurant {
            margin-top: var(--hauteur-navbar);
            height: 40vh;
            background: linear-gradient(135deg, var(--couleur-orange) 0%, #FF6B35 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--couleur-blanc);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-restaurant::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M0 50 Q 25 25 50 50 T 100 50 L 100 100 L 0 100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            animation: wave 20s linear infinite;
        }

        @keyframes wave {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-50%) translateY(0); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-restaurant h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero-restaurant p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Section Restaurant */
        .section-restaurant {
            min-height: 100vh;
            padding: 3rem 2rem;
            background: var(--couleur-surface);
        }

        .restaurant-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .restaurant-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .restaurant-header h2 {
            font-size: 2.5rem;
            color: var(--couleur-accent);
            margin-bottom: 0.5rem;
        }

        /* Layout principal avec liste et carte */
        .restaurant-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            height: calc(100vh - var(--hauteur-navbar) - 400px);
            min-height: 500px;
        }

        /* Liste des restaurants */
        .restaurants-list {
            background: var(--couleur-blanc);
            border-radius: 15px;
            padding: 1.5rem;
            overflow-y: auto;
            max-height: 100%;
        }

        /* Banner restaurant */
        .restaurant-banner {
            background: linear-gradient(135deg, var(--couleur-surface) 0%, var(--couleur-blanc) 100%);
            border-radius: 15px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .restaurant-banner:hover {
            transform: translateY(-5px);
            border-color: var(--couleur-orange);
            box-shadow: 0 10px 30px rgba(255, 138, 80, 0.2);
        }

        .restaurant-banner.selected {
            border-color: var(--couleur-orange);
            box-shadow: 0 10px 30px rgba(255, 138, 80, 0.3);
        }

        .banner-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, var(--couleur-orange), #FF6B35);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--couleur-blanc);
            position: relative;
            overflow: hidden;
        }

        .banner-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>');
            opacity: 0.3;
        }

        .banner-content {
            padding: 1.5rem;
        }

        .restaurant-header-banner {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .restaurant-name {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--couleur-texte);
        }

        .restaurant-price {
            font-size: 1.1rem;
            color: var(--couleur-orange);
            font-weight: 700;
        }

        .restaurant-type {
            display: inline-block;
            padding: 4px 12px;
            background: var(--couleur-orange);
            color: var(--couleur-blanc);
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .restaurant-description {
            color: #666;
            font-size: 0.95rem;
            margin: 0.5rem 0;
            line-height: 1.6;
        }

        .restaurant-specialites {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .specialite-tag {
            padding: 4px 10px;
            background: rgba(255, 138, 80, 0.1);
            color: var(--couleur-orange);
            border-radius: 8px;
            font-size: 0.8rem;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            margin-top: 0.5rem;
        }

        .star {
            color: #FFD700;
            font-size: 1rem;
        }

        /* Carte */
        .map-container {
            background: var(--couleur-blanc);
            border-radius: 15px;
            padding: 1rem;
            position: relative;
        }

        #restaurant-map {
            width: 100%;
            height: 100%;
            border-radius: 10px;
            min-height: 400px;
        }

        /* Info popup sur la carte */
        .map-popup {
            max-width: 250px;
        }

        .map-popup h4 {
            color: var(--couleur-orange);
            margin-bottom: 0.5rem;
        }

        .map-popup .price {
            font-weight: 700;
            color: var(--couleur-texte);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .restaurant-content {
                grid-template-columns: 1fr;
                height: auto;
            }

            .map-container {
                height: 400px;
            }

            .restaurants-list {
                max-height: 500px;
            }
        }

        @media (max-width: 768px) {
            .hero-restaurant h1 {
                font-size: 2rem;
            }

            .restaurant-banner:hover {
                transform: none;
            }

            .banner-image {
                height: 150px;
                font-size: 3rem;
            }
        }

        /* Styles pour les marqueurs personnalisés */
        .restaurant-marker {
            background: var(--couleur-orange);
            color: white;
            border: 3px solid white;
            width: 35px !important;
            height: 35px !important;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(255, 138, 80, 0.4);
            transition: all 0.3s;
        }

        .restaurant-marker:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(255, 138, 80, 0.6);
        }

        /* Footer */
        .footer {
            background: var(--couleur-texte);
            color: var(--couleur-blanc);
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-column h3 {
            margin-bottom: 1rem;
            color: var(--couleur-accent);
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-icon {
            display: inline-block;
            width: 40px;
            height: 40px;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transition: all 0.3s;
        }

        .social-icon:hover {
            background: var(--couleur-hibiscus);
            transform: translateY(-3px);
        }

        .social-icon svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <header class="navbar">
        <div class="logo">
            <img src="./images/cilaos_logo_transparent.png" alt="logo" width="130" height="75">
        </div>
        <button class="nav-toggle" aria-label="Menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <nav class="nav-menu">
            <ul>
                <li><a href="#accueil">À découvrir</a></li>
                <li><a href="#sejour">Séjours</a></li>
                <li><a href="">Tourisme</a></li>
                <li><a href="">Info pratiques</a></li>
                <li><a href="">Contact</a></li>
            </ul>
            <a href="#" class="btn btn-pro">PRO</a>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-restaurant">
        <div class="hero-content">
            <h1>Savourer Cilaos</h1>
            <p>Découvrez les délices culinaires du cirque</p>
        </div>
    </section>

    <!-- Section Restaurant -->
    <section class="section-restaurant" id="restaurants">
        <div class="restaurant-container">
            <div class="restaurant-header">
                <h2>Où manger à Cilaos</h2>
                <p>9 restaurants pour découvrir les saveurs authentiques du cirque</p>
            </div>

            <!-- Contenu principal -->
            <div class="restaurant-content">
                <!-- Liste des restaurants -->
                <div class="restaurants-list" id="restaurantsList">
                    <!-- Les restaurants seront générés par JavaScript -->
                </div>

                <!-- Carte -->
                <div class="map-container">
                    <div id="restaurant-map"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h3>Mairie de Cilaos</h3>
                <p>66 Rue du Père Boiteau<br>97413 Cilaos, La Réunion</p>
                <p>📞 +262 262 31 77 39</p>
            </div>
            
            <div class="footer-column">
                <h3>Office de Tourisme</h3>
                <p>2 Rue des Écoles<br>97413 Cilaos, La Réunion</p>
                <p>📞 +262 262 31 70 30<br>✉️ info@ot-cilaos.re</p>
            </div>
            
            <div class="footer-column">
                <h3>Horaires d'ouverture</h3>
                <p><strong>Office de Tourisme :</strong><br>
                Lun-Sam : 9h-12h / 13h30-17h<br>
                Dimanche : 9h-12h</p>
            </div>
            
            <div class="footer-column">
                <h3>Suivez-nous</h3>
                <div class="social-links">
                    <a href="https://www.facebook.com/OfficeTourismeCilaos" aria-label="Facebook" class="social-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    <a href="https://twitter.com/CilaosTourisme" aria-label="X (Twitter)" class="social-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4l11.733 16h4.267l-11.733-16zM20 4L8.267 20h-4.267l11.733-16z" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/cilaos.tourisme" aria-label="Instagram" class="social-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    <a href="https://www.youtube.com/c/CilaosTourisme" aria-label="YouTube" class="social-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z" stroke="#FF1744" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="#FF1744"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 Office de Tourisme de Cilaos - Tous droits réservés</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Base de données des restaurants
        const restaurants = [
            {
                id: 1,
                name: "Le Vieux Cep",
                type: "Cuisine traditionnelle",
                price: "€€€",
                lat: -21.13612,
                lon: 55.47278,
                rating: 4.6,
                emoji: "🍷",
                specialites: ["Carry de porc", "Cuisine créole", "Vins locaux"],
                description: "Restaurant emblématique de Cilaos, le Vieux Cep vous propose une cuisine créole authentique dans un cadre traditionnel. Spécialiste des carrys et des plats mijotés, accompagnés d'une sélection de vins de Cilaos."
            },
            {
                id: 2,
                name: "Le Grilladin",
                type: "Grillades & BBQ",
                price: "€€",
                lat: -21.1370,
                lon: 55.4720,
                rating: 4.3,
                emoji: "🔥",
                specialites: ["Grillades au feu de bois", "Côte de bœuf", "Saucisses fumées"],
                description: "Spécialiste des grillades au feu de bois, Le Grilladin vous offre une expérience unique avec ses viandes fumées et ses légumes grillés. Ambiance conviviale garantie !"
            },
            {
                id: 3,
                name: "La Table de Tatie Jeanne",
                type: "Cuisine familiale",
                price: "€€",
                lat: -21.1340,
                lon: 55.4695,
                rating: 4.8,
                emoji: "👵",
                specialites: ["Rougail saucisse", "Cari légumes", "Gâteau patate douce"],
                description: "Chez Tatie Jeanne, c'est comme à la maison ! Cuisine familiale généreuse, recettes de grand-mère et produits du jardin. Le vrai goût de la tradition créole."
            },
            {
                id: 4,
                name: "Le Bistrot Cilaos",
                type: "Bistrot moderne",
                price: "€€€",
                lat: -21.1355,
                lon: 55.4715,
                rating: 4.4,
                emoji: "🍽️",
                specialites: ["Cuisine fusion", "Tartare de thon", "Cocktails créoles"],
                description: "Bistrot moderne alliant tradition créole et techniques culinaires contemporaines. Carte créative et présentation soignée dans un cadre élégant."
            },
            {
                id: 5,
                name: "Le Relais des Cimes",
                type: "Restaurant d'altitude",
                price: "€€€€",
                lat: -21.1320,
                lon: 55.4690,
                rating: 4.7,
                emoji: "🏔️",
                specialites: ["Lentilles de Cilaos", "Cerf aux épices", "Fromage de chèvre"],
                description: "Restaurant gastronomique perché dans les hauteurs, offrant une vue exceptionnelle. Cuisine raffinée mettant à l'honneur les produits locaux d'altitude."
            },
            {
                id: 6,
                name: "Chez Loulou",
                type: "Snack créole",
                price: "€",
                lat: -21.1375,
                lon: 55.4730,
                rating: 4.2,
                emoji: "🥪",
                specialites: ["Samoussas", "Bouchons", "Bonbons piment"],
                description: "Le snack incontournable de Cilaos ! Chez Loulou, vous trouverez tous les en-cas créoles : samoussas croustillants, bouchons vapeur et les fameux bonbons piment."
            },
            {
                id: 7,
                name: "L'Affût",
                type: "Restaurant de chasse",
                price: "€€€",
                lat: -21.1310,
                lon: 55.4750,
                rating: 4.5,
                emoji: "🦌",
                specialites: ["Civet de cerf", "Cabri massalé", "Charcuterie locale"],
                description: "Spécialiste du gibier et des viandes de caractère. L'Affût propose une cuisine rustique et authentique, parfaite après une journée de randonnée."
            },
            {
                id: 8,
                name: "La Cascade",
                type: "Restaurant panoramique",
                price: "€€€",
                lat: -21.1340,
                lon: 55.4670,
                rating: 4.6,
                emoji: "🌊",
                specialites: ["Poisson grillé", "Salade de lentilles", "Rhum arrangé"],
                description: "Restaurant avec vue imprenable sur la cascade Bras Rouge. Cuisine légère et fraîche, idéale pour un déjeuner en terrasse face aux paysages grandioses."
            },
            {
                id: 9,
                name: "Juste",
                type: "Cuisine végétarienne",
                price: "€€",
                lat: -21.1360,
                lon: 55.4680,
                rating: 4.4,
                emoji: "🌱",
                specialites: ["Curry de légumes", "Graines créoles", "Jus de fruits frais"],
                description: "Premier restaurant végétarien de Cilaos, Juste propose une cuisine saine et colorée. Produits bio locaux, plats créatifs et boissons détox maison."
            }
        ];

        // Variables globales
        let selectedRestaurant = null;
        let map = null;
        let markers = [];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initMap();
            displayRestaurants();
        });

        // Initialiser la carte
        function initMap() {
            map = L.map('restaurant-map').setView([-21.1339, 55.4708], 14);
            
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: '© OpenStreetMap © CARTO',
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(map);
        }

        // Afficher les restaurants
        function displayRestaurants() {
            const listContainer = document.getElementById('restaurantsList');
            
            let html = '';
            
            restaurants.forEach(restaurant => {
                const stars = generateStars(restaurant.rating);
                html += `
                    <div class="restaurant-banner ${selectedRestaurant?.id === restaurant.id ? 'selected' : ''}" 
                         onclick="selectRestaurant(${restaurant.id})">
                        <div class="banner-image">
                            ${restaurant.emoji}
                        </div>
                        <div class="banner-content">
                            <div class="restaurant-header-banner">
                                <div>
                                    <div class="restaurant-name">${restaurant.name}</div>
                                    <span class="restaurant-type">${restaurant.type}</span>
                                </div>
                                <div class="restaurant-price">${restaurant.price}</div>
                            </div>
                            <div class="restaurant-description">
                                ${restaurant.description}
                            </div>
                            <div class="restaurant-specialites">
                                ${restaurant.specialites.map(s => `<span class="specialite-tag">${s}</span>`).join('')}
                            </div>
                            <div class="rating">
                                ${stars} <span style="color: #999; font-size: 0.9rem;">(${restaurant.rating})</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            listContainer.innerHTML = html;
            
            // Mettre à jour les marqueurs sur la carte
            updateMapMarkers();
        }

        // Générer les étoiles
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<span class="star">★</span>';
            }
            if (halfStar) {
                stars += '<span class="star">☆</span>';
            }
            
            return stars;
        }

        // Sélectionner un restaurant
        function selectRestaurant(id) {
            selectedRestaurant = restaurants.find(r => r.id === id);
            
            // Mettre à jour l'affichage
            displayRestaurants();
            
            // Centrer la carte sur le restaurant
            if (selectedRestaurant) {
                map.setView([selectedRestaurant.lat, selectedRestaurant.lon], 16);
                
                // Ouvrir le popup du marqueur correspondant
                markers.forEach(marker => {
                    if (marker.restaurantId === id) {
                        marker.openPopup();
                    }
                });
            }
        }

        // Mettre à jour les marqueurs sur la carte
        function updateMapMarkers() {
            // Supprimer les anciens marqueurs
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            // Ajouter les nouveaux marqueurs
            restaurants.forEach(restaurant => {
                const icon = L.divIcon({
                    className: 'restaurant-marker',
                    html: restaurant.emoji,
                    iconSize: [35, 35]
                });
                
                const marker = L.marker([restaurant.lat, restaurant.lon], { icon })
                    .bindPopup(`
                        <div class="map-popup">
                            <h4>${restaurant.name}</h4>
                            <p>${restaurant.type}</p>
                            <p class="price">${restaurant.price}</p>
                            <p>${generateStars(restaurant.rating)}</p>
                            <p><strong>Spécialités:</strong><br>${restaurant.specialites.join(', ')}</p>
                        </div>
                    `)
                    .addTo(map);
                
                marker.restaurantId = restaurant.id;
                markers.push(marker);
                
                // Ajouter un événement click
                marker.on('click', function() {
                    selectRestaurant(restaurant.id);
                });
            });
        }
    </script>
</body>
</html>